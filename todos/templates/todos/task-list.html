{% extends 'base.html' %}
{% load expired_task %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'tasks/style.css' %}">
{% endblock %}
{% block content %}
<div class="container mt-4">
    <a href="{% url 'todo:todo-task-create' %}" class="btn btn-primary rounded-0 mb-4">New Task</a>
    <div class="row">
        <div class="col-md-4">
            <div class="card" style="width: 18rem;">
                <img src="{% static 'account/images/anshu.png' %}" class="card-img-top rounded-circle" alt="...">
                <hr>
                <div class="card-body">
                    <ol class="list-group list-group-numbered">
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold">All Completed</div>
                            </div>
                            <span class="badge bg-primary rounded-pill">{{completed_task}}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold">To Be Done</div>

                            </div>
                            <span class="badge bg-primary rounded-pill">{{tobe_done_task}}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold">Completed On Time</div>
                            </div>
                            <span class="badge bg-primary rounded-pill">14</span>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="">

                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Title</th>
                        <th scope="col">Priority</th>
                        <th scope="col">Task To Be Completed</th>

                    </tr>
                    </thead>
                    <tbody>
                    {% for task in task_list %}
                    {% if not task.due_date|task_expired %}
                    <tr class="">

                        <th scope="row">{{forloop.counter}}</th>

                        <td><a href="{% url 'todo:task-detail' task.id %}">{{task.title}}</a></td>

                        <td>{{task.priority}}</td>
                        <td>{{task.due_date | date:"D d M Y"}} {% if task.due_date|task_expired %}
                            <span class="badge bg-danger">Expired</span>
                            {% else %}
                            <div class="spinner-grow text-success" style="width: 1rem; height: 1rem;" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            {% endif %}
                        </td>

                        <!--      <td> <a href="{% url 'todo:delete' task.id %}" class="btn btn-danger">Delete</a></td>-->
                    </tr>
                    {% endif %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>


{% endblock %}